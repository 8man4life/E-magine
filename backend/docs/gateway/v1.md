# E-Magine Backend Gateway Documentation

### Version 1

#### Last updated: 17 Jan 2020 20:15 SGT

### Opcodes
| Opcode | Side          | Description |
|:------:| ------------- | ----------- |
| 0      | Client        | Hello opcode, sent from server when first connected. |
| 1      | Server        | Identify opcode, sent by client to authenticate using token. |
| 2      | Client        | Message opcode, sent from server when new messages appear. |
| 10     | Client/Server | Heartbeat opcode to request heartbeat from other side. |
| 11     | Client/Server | Heartbeat ACK opcode, used to acknowledge heartbeat by other side. |

#### Opcode 0 Hello
This data will be sent when client establishes connection with server gateway.

```json
{
  "op": 0,
  "heartbeat_interval": 45000
}
```

It will also include a `heartbeat_interval` parameter, 
where clients will be expected to send an opcode 10 Heartbeat to the server after that time in milliseconds.

The client should then proceed to send an Identify Opcode right after connecting, which is described below.
